function load(){let i="conduit-profile",t=-1;customElements.define(i,class extends HTMLElement{constructor(){super(),t++;this.html='<div class="profile-page"><div class="user-info"><div class="container"><div class="row"><div class="col-xs-12 col-md-10 offset-md-1"><img src="golgi:bind=image" class="user-img" decoding="async"><h4>golgi:bind=username</h4><p>golgi:bind=bio</p><button class="btn btn-sm btn-outline-secondary action-btn" golgi:prop="followBtn" golgi:on_click="followToggle"><i class="ion-plus-round"></i> &nbsp; <span>golgi:bind=followToggle</span> &nbsp; <span>golgi:bind=username</span></button> <button class="btn btn-sm btn-outline-secondary action-btn" golgi:prop="editProfileBtn" golgi:on_click="editSettings"><i class="ion-gear-a"></i> &nbsp; Edit Profile Settings</button></div></div></div></div><div class="container"><div class="row"><div class="col-xs-12 col-md-10 offset-md-1"><div class="articles-toggle"><ul class="nav nav-pills outline-active"><li class="nav-item"><a class="nav-link active" href="#" golgi:prop="myArticlesLink" golgi:on_click="showMyArticles">My Articles</a></li><li class="nav-item"><a class="nav-link" href="#" golgi:prop="favouritedArticlesLink" golgi:on_click="showFavoritedArticles">Favorited Articles</a></li></ul></div><div><div golgi:prop="myArticles"><div golgi:prop="myArticlesPreview"></div><nav><ul golgi:prop="myArticlesPagination"></ul></nav></div><div golgi:prop="favouritedArticles"><div golgi:prop="favouritedArticlesPreview"></div><nav><ul golgi:prop="favouritedArticlesPagination"></ul></nav></div></div></div></div></div></div>',this.name=i+"-"+t}setState(i){i.name&&(this.name=i.name)}async followToggle(){var i;this.rootComponent.isLoggedIn()?this.profile&&!1===this.profile.following?(i=await this.rootComponent.apis.follow(this.profile.username)).error||(this.profile=this.normaliseProfile(i.profile),this.golgi_state.profile=this.profile,this.rootComponent.pageComponent.get("home_page").refresh_home_page()):(i=await this.rootComponent.apis.unfollow(this.profile.username)).error||(this.profile=this.normaliseProfile(i.profile),this.golgi_state.profile=this.profile,this.rootComponent.pageComponent.get("home_page").refresh_home_page()):this.rootComponent.switchToPage("login",{returnTo:"profile"})}showMyArticles(){this.show(this.myArticles),this.hide(this.favouritedArticles),this.myArticlesLink.classList.contains("active")||this.myArticlesLink.classList.add("active"),this.favouritedArticlesLink.classList.contains("active")&&this.favouritedArticlesLink.classList.remove("active"),this.myArticlesPreview.hasChildNodes()||this.fetchMyArticles()}showFavoritedArticles(){this.show(this.favouritedArticles),this.hide(this.myArticles),this.favouritedArticlesLink.classList.contains("active")||this.favouritedArticlesLink.classList.add("active"),this.myArticlesLink.classList.contains("active")&&this.myArticlesLink.classList.remove("active"),this.favouritedArticlesPreview.hasChildNodes()||this.fetchFavouritedArticles()}editSettings(){this.rootComponent.switchToPage("settings",{returnTo:"profile"})}async fetchArticles(i,t,e){i=await this.rootComponent.apis.getArticlesList(i,t,e);return this.rootComponent.normaliseArticles(i)}async fetchMyArticles(i){var t={author:this.profile.username},i=await this.fetchArticles(i=i||0,5,t);0===i.articlesCount?this.myArticlesPreview.innerHTML='<div class="article-preview">No articles are here...yet</div>':(this.rootComponent.addArticles(i.articlesArr,this.myArticlesPreview,"my_articles"),this.myPaginationDisplayed||(await this.rootComponent.addPagination.call(this,i.articlesCount,this.myArticlesPagination,"my-articles",5),this.myPaginationDisplayed=!0))}async fetchFavouritedArticles(i){var t={favourited:this.profile.username},i=await this.fetchArticles(i=i||0,5,t);0===i.articlesCount?this.favouritedArticlesPreview.innerHTML='<div class="article-preview">No articles are here...yet</div>':(this.rootComponent.addArticles(i.articlesArr,this.favouritedArticlesPreview,"fav_articles"),this.favouritedPaginationDisplayed||(await this.rootComponent.addPagination.call(this,i.articlesCount,this.favouritedArticlesPagination,"favourited-articles",5),this.favouritedPaginationDisplayed=!0))}async getAndDisplayProfile(i){i=await this.rootComponent.apis.getProfile(i);this.profile=this.normaliseProfile(i),this.golgi_state.profile=this.profile,this.removeMyArticles(),this.removeFavouritedArticles(),this.showMyArticles(),this.rootComponent.isLoggedIn()&&this.rootComponent.user.username===this.profile.username?(this.hide(this.followBtn),this.show(this.editProfileBtn)):(this.show(this.followBtn),this.hide(this.editProfileBtn))}normaliseProfile(i){return!1===i.following?i.followToggle="Follow":i.followToggle="Unfollow",i.bio||(i.bio=""),i.image||(i.image=this.rootComponent.defaultImage),i}getAndDisplayArticles(i,t){"my-articles"===t?(this.rootComponent.removeArticles(this.myArticlesPreview),this.fetchMyArticles(i)):"favourited-articles"===t&&(this.rootComponent.removeArticles(this.favouritedArticlesPreview),this.fetchFavouritedArticles(i))}removeMyArticles(){this.rootComponent.removeArticles(this.myArticlesPreview),this.rootComponent.removePagination.call(this,this.myArticlesPagination),this.myPaginationDisplayed=!1,this.myArticlesPreview.textContent=""}removeFavouritedArticles(){this.rootComponent.removeArticles(this.favouritedArticlesPreview),this.rootComponent.removePagination.call(this,this.favouritedArticlesPagination),this.favouritedPaginationDisplayed=!1,this.favouritedArticlesPreview.textContent=""}show(i){i.style="display:"}hide(i){i.style="display: none"}onSelected(i){this.getAndDisplayProfile(i.author)}})}export{load};